# 二进制代码相似性检测
## 实验填坑指南
### 老版本openssl编译错误
> CMS => PKCS#7 compatibility tests
> signed content DER format, RSA key: verify error
> *** Error 1 in test (Makefile:330 'test_cms')

这是证书过期了，把系统时间改成2013年，编译即可。

---

```
installing man1/cms.1
cms.pod around line 457: Expected text after =item, not a number
cms.pod around line 461: Expected text after =item, not a number
cms.pod around line 465: Expected text after =item, not a number
cms.pod around line 470: Expected text after =item, not a number
cms.pod around line 474: Expected text after =item, not a number
POD document had syntax errors at /usr/bin/pod2man line 71.
make: *** [install_docs] Error 255
```


Changing
`make install` to `make install_sw`即可


### 使用Clang编译openssl
在`Makefile`和`Makefile.org`中修改如下：
```
CC= /home/yunlong/llvm/llvm/llvm_release/bin/clang
MAKEDEPPROG= $(CC) -M
```

需要修改编译选项的话，直接在上面`CFLAG`中添加即可。


### Genius

1 `LoadFuncs`从文件中提取所有的函数名
输入：/path/func_candid
格式要求：一行一个函数名，以\n结尾
```
func1\n
func2\n
...
```
2.`retrieveFeatures(n, base_dir, filename, funcs):`从目标路径中获取feature
输入参数：
```
n:第几个文件
base_dir : 输入训练语料目录
filename: target function
funcs: 函数名 （未用）
```
路径规则：
`basedir/5000/filename_cbn.feature`
输入文件格式要求：字典形式
```
func1:feature1
func2:feature2
```

3.`retrieveVuldb(base_input_dir)`获得漏洞数据库

### 实验记录
#### Accuracy
oneline search top 10的准确度
1. 我修改的公式：
```
total accury: 0.36

```
2. genius自身的
total accury: 0.34

top 100
1. 修改的
0.318 0.268

2. genius
0.324 0.279

top 1000
1. 0.2906
2. 0.2937
#### efficiency
top 100
96s

1012

